{% extends "buyer/main.html" %}
{% load static %}
{% block title %} Buyer Dashboard {% endblock title %}
{% block buyer_page_title %} Buyer Dashboard {% endblock buyer_page_title %}
    
{% block buyer_content %}
        
        <!-- content begin -->
        <div class="col-lg-9">
            <div class="row">
                <div class="col-lg-3 col-6 mb25 order-sm-1">
                    <div class="card p-4 rounded-5">
                        <div class="symbol mb40">
                            <i class="fa id-color fa-2x fa-calendar-check-o"></i>
                        </div>
                        <span class="h1 mb0">{{orders_count}}</span>
                        <span class="text-gray">You Ordered</span>
                    </div>
                </div>

                <div class="col-lg-3 col-6 mb25 order-sm-1">
                    <div class="card p-4 rounded-5">
                        <div class="symbol mb40">
                            <i class="fa id-color fa-2x fa-tags"></i>
                        </div>
                        <span class="h1 mb0">{{buyer_made_favorites}}</span>
                        <span class="text-gray">You Made Favorite</span>
                    </div>
                </div>

                <div class="col-lg-3 col-6 mb25 order-sm-1">
                    <div class="card p-4 rounded-5">
                        <div class="symbol mb40">
                            <i class="fa id-color fa-2x fa-calendar"></i>
                        </div>
                        <span class="h1 mb0">{{completed_orders_count}}</span>
                        <span class="text-gray">Total Completed Orders</span>
                    </div>
                </div>

                <div class="col-lg-3 col-6 mb25 order-sm-1">
                    <div class="card p-4 rounded-5">
                        <div class="symbol mb40">
                            <i class="fa id-color fa-2x fa-calendar-times-o"></i>
                        </div>
                        <span class="h1 mb0">{{conversations}}</span>
                        <span class="text-gray">Total Messages</span>
                    </div>
                </div>
            </div>

            <div class="card p-4 rounded-5 mb25">
                <h4>My Recent Orders</h4>

                <table class="table table-striped table-hover">
                  <thead class="table-light">
                      <tr>
                          <th scope="col" class="text-uppercase small">Sr. NO</th>
                          <th scope="col" class="text-uppercase small">Vehicle Name</th>
                          <th scope="col" class="text-uppercase small">Color</th>
                          <th scope="col" class="text-uppercase small">Engine</th>
                          <th scope="col" class="text-uppercase small">Mode</th>
                          <th scope="col" class="text-uppercase small">Made Order On</th>
                          <th scope="col" class="text-uppercase small">Order Status</th>
                      </tr>
                  </thead>
                  <tbody>
                      {% if orders %}
                          {% for order in orders %}
                          <tr>
                              <td><span class="badge bg-info">{{forloop.counter}}</span></td>
                              <td>{{order.vehicle.name}}</td>
                              <td>{{order.vehicle.color}}</td>
                              <td>{{order.vehicle.engine}}</td>
                              <td>{{order.vehicle.mode}}</td>
                              <td>{{order.created_at}}</td>
                              <td>
                                {% if order.is_confirmed == "Completed" %}
                                    <span class="badge bg-success">Completed</span>
                                {% elif order.is_confirmed == "Pending" %}
                                    <span class="badge bg-warning">Pending</span>
                                {% else %}
                                    <span class="badge bg-danger">Cancelled</span>
                                {% endif %}
                            </td>
                            
                          </tr>
                          {% endfor %}
                      {% else %}
                          <tr>
                              <td><span class="badge bg-secondary">#01236</span></td>
                              <td>Jeep Renegade</td>
                              <td>Red</td>
                              <td>2.0L</td>
                              <td>Automatic</td>
                              <td>March 2, 2023</td>
                              <td><span class="badge bg-success">Completed</span></td>
                          </tr>
                      {% endif %}
                  </tbody>
              </table>
            </div>
        </div>
      <!-- content close -->
{% endblock %}